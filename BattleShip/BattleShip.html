<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>BattleShip</title>
    <link rel="stylesheet" type="text/css" href="BattleShip.css">
    <link href='https://fonts.googleapis.com/css?family=Gruppo' rel='stylesheet'>
</head>

<body onload="" scroll="no" style="overflow: hidden">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <h1>BattleShip game</h1>

    <table align="center">
        <tr>
            <td id="0" class="0" onclick="draw(0)">   </td>
            <td id="1" class="1" onclick="draw(1)">   </td>
            <td id="2" class="2" onclick="draw(2)">   </td>
            <td id="3" class="3" onclick="draw(3)">   </td>
            <td id="4" class="4" onclick="draw(4)">   </td>
            <td id="5" class="5" onclick="draw(5)">   </td>
            <td id="6" class="6" onclick="draw(6)"></td>
            <td id="7" class="7" onclick="draw(7)"></td>
            <td id="8" class="8" onclick="draw(8)"></td>
            <td id="9" class="9" onclick="draw(9)"></td>

        </tr>

        <tr>

            <td id="10" class="0" onclick="draw(10)"></td>
            <td id="11" class="1" onclick="draw(11)"></td>
            <td id="12" class="2" onclick="draw(12)"></td>
            <td id="13" class="3" onclick="draw(13)"></td>
            <td id="14" class="4" onclick="draw(14)"></td>
            <td id="15" class="5" onclick="draw(15)"></td>
            <td id="16" class="6" onclick="draw(16)"></td>
            <td id="17" class="7" onclick="draw(17)"></td>
            <td id="18" class="8" onclick="draw(18)"></td>
            <td id="19" class="9" onclick="draw(19)"></td>

        </tr>

        <tr>

            <td id="20" class="0" onclick="draw(20)"></td>
            <td id="21" class="1" onclick="draw(21)"></td>
            <td id="22" class="2" onclick="draw(22)"></td>
            <td id="23" class="3" onclick="draw(23)"></td>
            <td id="24" class="4" onclick="draw(24)"></td>
            <td id="25" class="5" onclick="draw(25)"></td>
            <td id="26" class="6" onclick="draw(26)"></td>
            <td id="27" class="7" onclick="draw(27)"></td>
            <td id="28" class="8" onclick="draw(28)"></td>
            <td id="29" class="9" onclick="draw(29)"></td>


        </tr>

        <tr>
            <td id="30" class="0" onclick="draw(30)"></td>
            <td id="31" class="1" onclick="draw(31)"></td>
            <td id="32" class="2" onclick="draw(32)"></td>
            <td id="33" class="3" onclick="draw(33)"></td>
            <td id="34" class="4" onclick="draw(34)"></td>
            <td id="35" class="5" onclick="draw(35)"></td>
            <td id="36" class="6" onclick="draw(36)"></td>
            <td id="37" class="7" onclick="draw(37)"></td>
            <td id="38" class="8" onclick="draw(38)"></td>
            <td id="39" class="9" onclick="draw(39)"></td>

        </tr>
        <tr>
            <td id="40" class="0" onclick="draw(40)"></td>
            <td id="41" class="1" onclick="draw(41)"></td>
            <td id="42" class="2" onclick="draw(42)"></td>
            <td id="43" class="3" onclick="draw(43)"></td>
            <td id="44" class="4" onclick="draw(44)"></td>
            <td id="45" class="5" onclick="draw(45)"></td>
            <td id="46" class="6" onclick="draw(46)"></td>
            <td id="47" class="7" onclick="draw(47)"></td>
            <td id="48" class="8" onclick="draw(48)"></td>
            <td id="49" class="9" onclick="draw(49)"></td>
        </tr>
        <tr>


            <td id="50" class="0" onclick="draw(50)"></td>
            <td id="51" class="1" onclick="draw(51)"></td>
            <td id="52" class="2" onclick="draw(52)"></td>
            <td id="53" class="3" onclick="draw(53)"></td>
            <td id="54" class="4" onclick="draw(54)"></td>
            <td id="55" class="5" onclick="draw(55)"></td>
            <td id="56" class="6" onclick="draw(56)"></td>
            <td id="57" class="7" onclick="draw(57)"></td>
            <td id="58" class="8" onclick="draw(58)"></td>
            <td id="59" class="9" onclick="draw(59)"></td>
        </tr>
        <tr>
            <td id="60" class="0" onclick="draw(60)"></td>
            <td id="61" class="1" onclick="draw(61)"></td>
            <td id="62" class="2" onclick="draw(62)"></td>
            <td id="63" class="3" onclick="draw(63)"></td>
            <td id="64" class="4" onclick="draw(64)"></td>
            <td id="65" class="5" onclick="draw(65)"></td>
            <td id="66" class="6" onclick="draw(66)"></td>
            <td id="67" class="7" onclick="draw(67)"></td>
            <td id="68" class="8" onclick="draw(68)"></td>
            <td id="69" class="9" onclick="draw(69)"></td>
        </tr>
        <tr>
            <td id="70" class="0" onclick="draw(70)"></td>
            <td id="71" class="1" onclick="draw(71)"></td>
            <td id="72" class="2" onclick="draw(72)"></td>
            <td id="73" class="3" onclick="draw(73)"></td>
            <td id="74" class="4" onclick="draw(74)"></td>
            <td id="75" class="5" onclick="draw(75)"></td>
            <td id="76" class="6" onclick="draw(76)"></td>
            <td id="77" class="7" onclick="draw(77)"></td>
            <td id="78" class="8" onclick="draw(78)"></td>
            <td id="79" class="9" onclick="draw(79)"></td>
        </tr>
        <tr>
            <td id="80" class="0" onclick="draw(80)"></td>
            <td id="81" class="1" onclick="draw(81)"></td>
            <td id="82" class="2" onclick="draw(82)"></td>
            <td id="83" class="3" onclick="draw(83)"></td>
            <td id="84" class="4" onclick="draw(84)"></td>
            <td id="85" class="5" onclick="draw(85)"></td>
            <td id="86" class="6" onclick="draw(86)"></td>
            <td id="87" class="7" onclick="draw(87)"></td>
            <td id="88" class="8" onclick="draw(88)"></td>
            <td id="89" class="9" onclick="draw(89)"></td>
        </tr>
        <tr>
            <td id="90" class="0" onclick="draw(90)"></td>
            <td id="91" class="1" onclick="draw(91)"></td>
            <td id="92" class="2" onclick="draw(92)"></td>
            <td id="93" class="3" onclick="draw(93)"></td>
            <td id="94" class="4" onclick="draw(94)"></td>
            <td id="95" class="5" onclick="draw(95)"></td>
            <td id="96" class="6" onclick="draw(96)"></td>
            <td id="97" class="7" onclick="draw(97)"></td>
            <td id="98" class="8" onclick="draw(98)"></td>
            <td id="99" class="9" onclick="draw(99)"></td>
        </tr>
    </table>

    <div class="panel_ONE">
        <div class="topPanel">
            <div class="layout">
                <div class='buttons' onclick="my_alert_newgame()">NEW GAME</div>
                <div class='buttons' onclick="help()">HELP </div>
                <div class='buttons' onclick="chnage_moves()">chnage moves</div>
                <div class='buttons' onclick="RATEUS()">EXSIT</div>
                <div class='buttons' onclick="MUTE()">STOP MUSIC</div>
            </div>
        </div>
    </div>

    <div class="panel_TWO">
        <div class="topPanel">
            <div class="layout">
                <div class='buttons'>DISTROY:</div>
                <ul style="list-style-type:circle;">
                    <li id="b1">patrol boat</li>
                    <li id="b2">Submarine</li>
                    <li id="b3">destroyer</li>
                    <li id="b4">battleship</li>
                    <li id="b5">aircraft carrier</li>

                </ul>
                <h1 id="moves">30</h1> 
            </div>
        </div>
    </div>

    <img src="https://s3.amazonaws.com/gs-geo-images/4aef37d9-a816-4da2-8bed-0c9aa884a4d2_l.png" alt="BATTLESHIP" id='logo' />




    <script>
        var audio = new Audio();
        var gameon = false;
        function draw(number) {
            if (gameon) {
                if (check_hit(number)) {
                    HIT_ELERT()
                    var audio = new Audio("https://raw.githubusercontent.com/ArunMichaelDsouza/javascript-30-course/master/src/01-javascript-drum-kit/sounds/snare.wav")
                    audio.play();
                    let index = arrofships.indexOf(number);//REPLACE HIT WITH 0 IN ARR
                    arrofships[index] = 0;//REPLACE HIT WITH 0 IN ARR
                    document.getElementById(number).style.backgroundColor = "red"; 
                }
                else {
                    moves_minus_one()
                    if (document.getElementById(number).style.backgroundColor == "" ) {
                        document.getElementById(number).style.backgroundColor = "blue"; 
                    }                   
                }
            }
            
            check_nizahon();
            check_del_disroy_list();
        }

        function HIT_ELERT() {
            Swal.fire({
                position: 'center',               
                title: 'HIT',
                showConfirmButton: false,
                timer: 1000
            })
        }

        function check_nizahon() {
            let newstop = true
            for (let i = 1; i < 100; i++) {
                if (arrofships.includes(i)) {
                    newstop = false;
                }              
            }
            if (newstop && Number(document.getElementById("moves").innerHTML) > 0 && gameon == true) {
                win();
            }
            if (document.getElementById("moves").innerHTML < 0) {
                lose()
            }
        }
        
        function win() {
            gameon = false;
            Swal.fire({
                title: 'Sweet!',
                text: 'YOU WON',
                imageUrl: 'https://www.creativefabrica.com/wp-content/uploads/2018/09/Hippie-Smily-face-580x386.jpg',
                imageWidth: 400,
                imageHeight: 200,
                imageAlt: 'Custom image',
                animation: false
            })
        }
        
        function lose() {
            if (gameon == true) {
                gameon = false;
                Swal.fire({
                    type: 'error',
                    title: 'Oops... YOU LOSE',
                    text: 'GOOD GAME ',

                })
            }           
        }

        function RATEUS() {
            let timerInterval
            Swal.fire({
                title: 'Auto close alert!',
                html: 'I will close in <b></b> milliseconds.',
                timer: 2000,
                onBeforeOpen: () => {
                    Swal.showLoading()
                    timerInterval = setInterval(() => {
                        Swal.getContent().querySelector('b')
                            .textContent = Swal.getTimerLeft()
                    }, 100)
                },
                onClose: () => {
                    clearInterval(timerInterval)
                }
            }).then((result) => {
                if (
                    /* Read more about handling dismissals below */
                    result.dismiss === Swal.DismissReason.timer
                ) {
                    console.log('I was closed by the timer')
                    window.close()
                }
                })
           
        }

        function moves_minus_one() {
            let old = Number(document.getElementById("moves").innerHTML)
            old = old - 1;
            document.getElementById("moves").innerHTML = old;
            if (old ==0 ) {
                lose();
            }
        }

        function check_del_disroy_list() {
            if (arrofships[1] == 0 && arrofships[2] == 0) {
                DEL_SHIP(1)             
            }
            if (arrofships[4] == 0 && arrofships[5] == 0) {
                DEL_SHIP(2)
            }
            if (arrofships[7] == 0 && arrofships[8] == 0 && arrofships[9] == 0) {
                DEL_SHIP(3)
            }
            if (arrofships[11] == 0 && arrofships[12] == 0 && arrofships[13] == 0 && arrofships[14]==0) {
                DEL_SHIP(4)
            }
            if (arrofships[16] == 0 && arrofships[17] == 0 && arrofships[18] == 0 && arrofships[19] == 0 && arrofships[20] == 0) {
                DEL_SHIP(5)
            }
        }
        function DEL_SHIP(NU) {
            if (document.getElementById("b" + NU).innerHTML != "") {
                document.getElementById("b" + NU).innerHTML = ""
                var audio2 = new Audio("https://raw.githubusercontent.com/ArunMichaelDsouza/javascript-30-course/master/src/01-javascript-drum-kit/sounds/crash.wav")
                audio2.play();
            }
              
                  
        }

        function check_hit(number) {
            return arrofships.includes(number);
        }
        function clear_boared() {
            stop = 0;
            arrofships=[]
            for (let i = 0; i < 100; i++) {
                document.getElementById(i).style.backgroundColor = ""; 
            }
        }

        function MUTE() {
            audio.pause();
        }

        function help() {            
            swal("help", "find and distroy all ships under a fixed set of moves");
        }
        function chnage_moves() {
            swal("enter a number of moves:", {
                content: "input",
            })
                .then((value) => {
                    if (!(isNaN(value))) {//only numbers
                        my_alert_newgame(); document.getElementById("moves").innerHTML = value;
                    }
                    
                });
            
        }
        function my_alert_newgame() {
            Swal.fire({
                position: 'center',
                type: 'success',
                title: " new game was created ",
                showConfirmButton: false,
                timer: 1500
            })
            document.getElementById("moves").innerHTML = "30"
            clear_boared(); 
            arrofships.push("2:"); create_ship(2);  
            arrofships.push("2:"); create_ship(2);  
            arrofships.push("3:");create_ship(3);  
            arrofships.push("4:");create_ship(4);  
            arrofships.push("5:"); create_ship(5);
            document.getElementById("b1").innerHTML = "patrol boat" 
            document.getElementById("b2").innerHTML = "Submarine" 
            document.getElementById("b3").innerHTML = "destroyer"  
            document.getElementById("b4").innerHTML = "battleship" 
            document.getElementById("b5").innerHTML = "aircraft carrier" 
            gameon = true;
           // alert(copy_arrofships)                             
            audio.src = "sounds/LAKEY INSPIRED - Chill Day (Vlog No Copyright Music).MP3";           
            audio.play();
        }

        //=============================================================================
        var place;
        var d;
        var stop = 0;
        var ligal;
        var arrofships = [];
        function create_ship(sizeofsheep) {           
            d = Math.floor(Math.random() * 2)// 0 or 1
             if (d == 1) {
                while (stop == 0) {
                    ligal = 0;
                    place = Math.floor(Math.random() * (100 - ((sizeofsheep) - 1) * 10))
                    for (var i = 0; i <= sizeofsheep - 1; i++) {
                        if (arrofships.includes(place + i * 10)) {
                            ligal = 1;
                        }
                    }
                    if (ligal == 0) {
                        for (var i = 0; i <= sizeofsheep-1; i++) {
                            //makemove(place + (i * 10))
                            arrofships.push(place + (i * 10))
                        } stop = 1;
                    }
                }
                stop = 0;
            }
           
            if (d == 0) {
                while (stop == 0) {
                    ligal = 0;
                    place = Math.floor(Math.random() * 100)
                    if (place % 10 > sizeofsheep) {
                        for (var i = 0; i <= sizeofsheep - 1; i++) {
                            if (arrofships.includes(place + i * -1)) {
                                ligal = 1;
                            }
                        }
                        if (ligal == 0) {
                            for (var i = 0; i <= sizeofsheep - 1; i++) {
                                //makemove(place + (i * -1))
                                arrofships.push(place + (i * -1))
                            } stop = 1;
                        }
                    }
                }    

            }
            ligal = 0; stop = 0;
        }
        //=============================================================================
        
        

    </script>

</body>
</html>

